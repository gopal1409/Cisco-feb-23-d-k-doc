#lets expose this deployment 
130  kubectl get deploy
 #this will give you the help
  132  kubectl expose my-first-deployment  --help
  #we are exposing using NodePort
  133  kubectl expose deployment my-first-deployment  --type=NodePort --name=my-first-service
  #this will show the portnumber in 30k series 
  ##login to any of the nodemachine get the private ip 
  134  kubectl get svc
  ####open the browser paste the private ip : port number
#lets update the image
 141  kubectl set image deployment my-first-deployment nginx=nulldevil/phpsysinfo
#this will show that there is an update going on
  142  kubectl get deploy
#now the replicaset will show there are two rs
  143  kubectl get rs
#if you look into the describe deploy you will see event where you will see two rs
  144  kubectl describe deploy my-first-deployment
  #this will show the rollout status
  146  kubectl rollout status deploy my-first-deployment
#this will show the pod
  147  kubectl get pod
  148  kubectl describe deploy my-first-deployment
#now check the ip address of all the pod 
  149  kubectl get pod -o wide
#finally refresh the page you will see php sysinfo which is connected to your one pod refresh the page after 30 second
#it means svc in roudn robin fashion moving the traffic from one pod to another
##lets check the rollout status and there revison
#rollout history will show that there is two revision 
151  kubectl rollout history deployment my-first-deployment
#if you want to see which image is in revision you can see it
  152  kubectl rollout history deployment my-first-deployment --revision=1
  153  kubectl rollout history deployment my-first-deployment --revision=2
##if you want to roll back to the previous release
#rs will show that you have two different revision
  155  kubectl get rs
#if you want to move to another revision
  158  kubectl rollout undo deployment my-first-deployment --to-revision=1
###now yoy will see the previos rs is zero
  159  kubectl get rs
#describe deploy will show that the name image
  160  kubectl describe deploy my-first-deployment
##refresh your page delete everything after the port number now you will see the nginx test page
  
